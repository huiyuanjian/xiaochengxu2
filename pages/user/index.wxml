<view class="user-page">
  <!-- 头部区域 -->
  <view class="user-header">
    <view class="user-header-main">
      <view class="user-info-row">
        <image class="user-avatar" src="{{avatarUrl}}" mode="aspectFill" />
        <view class="user-name-block">
          <text class="user-nickname">{{nickname}}</text>
          <text class="user-id">{{userId}}</text>
          <text class="user-intro">{{intro}}</text>
        </view>
        <view class="user-action-btns">
          <view class="user-camera-btn">
            <view class="user-camera-icon"></view>
          </view>
          <button class="user-logout-btn" bindtap="onLogout">退出</button>
        </view>
      </view>

      <view class="user-stats-row">
        <block wx:for="{{stats}}" wx:key="label">
          <view class="user-stat-item">
            <text class="user-stat-value">{{item.value}}</text>
            <text class="user-stat-label">{{item.label}}</text>
          </view>
        </block>
      </view>
    </view>
  </view>

  <!-- 内容区域 -->
  <view class="user-body">
    <!-- 顶部标签栏 -->
    <view class="user-tab-bar">
      <block wx:for="{{tabs}}" wx:key="key">
        <view
          class="user-tab-item {{activeTab === item.key ? 'user-tab-item-active' : ''}}"
          data-key="{{item.key}}"
          bindtap="onTabChange"
        >
          <text class="user-tab-text">{{item.label}}</text>
          <view
            wx:if="{{activeTab === item.key}}"
            class="user-tab-underline"
          ></view>
        </view>
      </block>
    </view>

    <!-- 瀑布流列表：一行两列 -->
    <scroll-view 
      class="user-scroll" 
      scroll-y="true"
      enable-back-to-top="true"
      refresher-enabled="true"
      refresher-triggered="{{loading && currentPage === 1}}"
      bindrefresherrefresh="onPullDownRefresh"
      bindscrolltolower="onReachBottom"
    >
      <view class="user-waterfall">
        <view class="user-waterfall-col">
          <block wx:for="{{wfLeft}}" wx:key="id">
            <view class="user-wf-card">
              <image class="user-wf-cover" src="{{item.cover}}" mode="widthFix" />
              <view class="user-wf-content">
                <text class="user-wf-title">{{item.title}}</text>
                <view class="user-wf-meta">
                  <text class="user-wf-author">{{item.author}}</text>
                  <text class="user-wf-like">❤ {{item.likeText}}</text>
                </view>
              </view>
            </view>
          </block>
        </view>

        <view class="user-waterfall-col">
          <block wx:for="{{wfRight}}" wx:key="id">
            <view class="user-wf-card">
              <image class="user-wf-cover" src="{{item.cover}}" mode="widthFix" />
              <view class="user-wf-content">
                <text class="user-wf-title">{{item.title}}</text>
                <view class="user-wf-meta">
                  <text class="user-wf-author">{{item.author}}</text>
                  <text class="user-wf-like">❤ {{item.likeText}}</text>
                </view>
              </view>
            </view>
          </block>
        </view>
      </view>

      <view class="user-empty-wrapper" wx:if="{{wfLeft.length === 0 && wfRight.length === 0 && !isLoading}}">
        <text class="user-empty-text">这里还没有内容</text>
      </view>
      
      <!-- 加载更多提示 -->
      <view class="user-load-more" wx:if="{{wfLeft.length > 0 || wfRight.length > 0}}">
        <text class="user-load-more-text" wx:if="{{isLoading && currentPage > 1}}">加载中...</text>
        <text class="user-load-more-text" wx:elif="{{!hasMoreData}}">没有更多了</text>
      </view>
    </scroll-view>
  </view>
</view>

